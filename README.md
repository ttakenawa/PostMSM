# PostMSM — Machine-learning post-processing for JMA MSM (and MSMG)

Authors: Kazuma Iwase, Tomoyuki Takenawa  
Affiliation: Tokyo University of Marine Science and Technology (TUMSAT)

[![Open In Colab](https://colab.research.google.com/assets/colab-badge.svg)](
https://colab.research.google.com/github/ttakenawa/PostMSM/blob/main/gbm_main_public.ipynb
)

---

## Overview
This repository provides a public demo notebook for our paper on machine-learning post-processing
of JMA MSM forecasts (precipitation, temperature, wind speed) and comparisons with MSM Guidance (MSMG).

### Note on released code and data
Due to data licensing restrictions, some distributed datasets are **NOT** the original (real) MSM/MSMG data
and are provided as **synthetic/derived substitutes**. Therefore, running this notebook with the shared data
may **not exactly reproduce** the paper results.

---

## Demo notebook
- `gbm_main_public.ipynb` — main Colab demo notebook  
  https://colab.research.google.com/github/ttakenawa/PostMSM/blob/main/gbm_main_public.ipynb

---

## Data

### Public synthetic dataset (Google Drive)
Synthetic dataset for reproducibility (Google Drive):  
https://drive.google.com/drive/folders/1-fViiakeGihCxSL0KHO2n0rxnDCnVpjd?usp=sharing

This folder contains:
- Synthetic MSM/MSMG-like inputs regenerated by a stochastic method (NOT the original MSM/MSMG data)
- Real observation CSVs (JMA station observations)

### Real data for full reproducibility (licensed / external)
To fully reproduce the paper results, you must obtain the original data separately (under the appropriate permissions)
and prepare it in the same file/column format expected by this notebook.

**Where to obtain the real data (as cited/described in the paper):**
- **MSM (JMA Mesoscale Model) data**: distributed via Research Institute for Sustainable Humanosphere (RISH), Kyoto University  
  http://database.rish.kyoto-u.ac.jp/index-e.html
- **MSMG (MSM Guidance)**: provided by JMA and distributed by Japan Meteorological Business Support Center (JMBSC)
- **Station observations (teacher data)**: JMA observations including 3-hour accumulated precipitation, hourly temperature, and wind speed

---

## Dataset / task summary (paper settings)
Targets:
- 3-hour accumulated precipitation
- hourly temperature
- wind speed

Period split:
- Train: 2019–2021
- Validation: 2022
- Test: 2023

Input configurations:
- Nearest-grid configuration: 62 features
- Surrounding-grid configuration: 5,702 features

Missing values:
- MSM fields have no missing values; only observation samples with missing values are excluded.

---

## How to run on Google Colab

### 1) Use the shared data_public via a Drive shortcut (recommended)
1. Open the shared link in your browser. The folder will appear in Google Drive under **Shared with me**.
2. In **Shared with me**, right-click the folder `data_public` → **Organize** → **Add shortcut to Drive**.
3. Choose the destination folder (example):
   - `My Drive → Colab Notebooks → PostMSM`
4. Click **Add shortcut**.

This creates a shortcut named `data_public` at:
- `/content/drive/MyDrive/PostMSM/data_public`

> Note: A shortcut is only a pointer.  
> If you need an independent copy, copy the folder (≈13 GB) into My Drive instead of using a shortcut.

### 2) Mount Drive and set ROOT
In Google Colab, mount Drive and set ROOT to that path:


## Memory / Colab note
This notebook can be RAM-heavy depending on the number of stations and lead times you load.

- For reproducible runs, we recommend a high-memory runtime (≈40 GB RAM or more).
- On Google Colab, selecting an **A100 (High-RAM)** runtime is a convenient option.
  (You may not actually need GPU acceleration, but the A100 runtime also provides the large-RAM environment.)

---

## License / Terms
- **Code**: (choose a license, e.g. MIT / Apache-2.0)
- **Data**: The shared dataset includes synthetic/derived substitutes plus real station observations.  
  Original MSM/MSMG data are not redistributed in this repository due to licensing restrictions.

---

## Citation
Citation information will be added after submission/publication (and/or arXiv posting).

---

## Contact
- For questions or issues, please open a GitHub Issue in this repository.

